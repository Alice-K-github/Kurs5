# Сервис ведения привычек

## Описание проекта

Приложение позволяет пользователям создавать привычки и следовать им. Подключены уведомления через telegram.

## Основные компоненты

- **Backend:** Django приложение для обработки запросов и взаимодействия с базой данных.
- **Database:** PostgreSQL для хранения данных о задачах и пользователях.

## Требования

- Django
- Celery
- Redis
- Nginx
- Docker
- Docker Compose

## Установка и запуск docker-compose

1. Клонируйте репозиторий:

    ```bash
    git clone https://github.com/Alice-K-github/Kurs5/master.git
    cd Django_30
    ```

2. Постройте и запустите контейнеры:

    ```bash
    docker compose up --build
    ```

3. Откройте браузер и перейдите по адресу:

    - Frontend: `http://localhost:8000`


## Настройка удалённого сервера и запуск workflow

1. Клонируйте репозиторий себе в пустой репозиторий либо локально на свой компьютер
2. В файле .env (если его нет создайте в корне проекта) укажите значение переменных из .env.sample, с учётом своих данных (секретные ключи, пароли).
3. На GitHub в настройках укажите секретные ключи для подключения к Docker Hub (своему аккаунту) и SSH для подключения к удалённому серверу:
    - DOCKER_HUB_USERNAME
    - DOCKER_HUB_ACCESS_TOKEN
    - SSH_USER
    - SSH_KEY
    - SSH_HOST
    - SERVER_IP
    - DEPLOY_DIR (папка, куда на удалённом сервере будет сохраняться приложение)
      Если вы используете свой удалённые сервер, рекомендую использовать Yandex Cloud. Следуйте инструкциям на сайте, чтобы создать виртуальную машину и получить SSH ключ.
4. Создайте файл для GitHub Actions:
   - Настройте автоматическое выполнение тестов и деплоя с помощью GitHub Actions.
5. Запустите процесс:
   - После того как изменения отправлены в GitHub, GitHub Actions автоматически протестирует код и задеплоит его на сервер, если тесты прошли успешно.



## Запуск GitHub Actions

1. Пушьте изменения:
   - Когда вы вносите изменения в основной репозиторий, GitHub Actions автоматически запустит тесты и деплой.

2. Проверьте результат:
   - После деплоя приложение будет доступно по IP-адресу сервера.


Теперь, при каждом изменении в репозитории, проект будет автоматически тестироваться и деплоиться на сервер.

## Настройка удаленного сервера

1. Подключитесь к серверу:
   - Используйте SSH для подключения к серверу:
     ```
     ssh admin@84.201.178.78
     ```

2. Установите необходимые пакеты:
   - Обновите сервер и установите Python, Docker, Docker Compose и другие необходимые инструменты.

3. Настройте SSH-ключи:
   - Сгенерируйте SSH-ключ и добавьте его в GitHub для автоматического деплоя.

4. Клонируйте проект на сервер:
   - Используйте команду `git clone` для скачивания проекта на сервер:
     ```
     git clone https://github.com/Kurs5/master.git
     ```

5. Запустите проект на сервере:
   - Разверните проект с помощью Docker командой `docker-compose up -d --build`:
     ```
     sudo docker-compose up -d --build
     ```

6. Настройте Nginx:
   - Убедитесь, что Nginx настроен для проксирования запросов к Django приложению.

   
